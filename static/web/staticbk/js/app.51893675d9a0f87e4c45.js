webpackJsonp([1],{"8UPk":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),o=s("/ocq"),a=s("mtWM"),n=s.n(a),r={data:function(){return{popupVisible:!1,filterPopupVisible:!1,baiduurl:"",houses:[],countries:[],provs:[],groups:[],cities:[],types:[{name:"在售",value:"saling"},{name:"已售",value:"saled"},{name:"租赁",value:"rent"}],country:"",prov:"",group:"",city:"",opendate:"",housetypeValue:"房源类型",housetype:"",starttime:"",endtime:"",countryname:"选择国家",provname:"选择省份",groupname:"选择大区",cityname:"选择城市",map:{},marker:{},center:{lat:49.2827291,lng:-123.1207375},zoom:12,loading:!0}},created:function(){var t=this;n.a.get("http://www.realtoraccess.com/web/get/countries/").then(function(e){t.countries=e.data})},mounted:function(){var t=this;this.map=new google.maps.Map(document.getElementById("map"),{zoom:this.zoom,center:this.center});n.a.get("http://www.realtoraccess.com/web/zone/listings/").then(function(e){t.houses=e.data,t.houses.forEach(t.generateMarker),t.loading=!1})},methods:{generateMarker:function(t,e){var s=t.lat,i=t.lng;""===s||""===i?(new google.maps.Geocoder).geocode({address:t.address},function(e,o){"OK"===o&&(s=e[0].geometry.location.lat(),i=e[0].geometry.location.lng(),this.createdMarker(s,i,t.price))}.bind(this)):this.createdMarker(s,i,t.price)},createdMarker:function(t,e,s){new google.maps.Marker({icon:"http://www.realtoraccess.com/static/web/images/label.png",label:{fontFamily:"STKaiti",fontSize:"16px",color:"#EA7865",fontWeight:"normal",text:s},position:{lat:Number(t),lng:Number(e)},map:this.map,animation:google.maps.Animation.DROP})},handleClick:function(){this.popupVisible=!0},toggle:function(){this.popupVisible?this.popupVisible=!1:this.popupVisible=!0},showfilter:function(){this.filterPopupVisible?this.filterPopupVisible=!1:this.filterPopupVisible=!0},selectCompleted:function(){this.filterPopupVisible=!1,this.opendate=this.startTime+"-"+this.endTime,this.loading=!0,this.getFilterHouse()},close:function(){this.filterPopupVisible=!1},handleCountry:function(t){this.countryname=this.countries[t].countryname,this.country=this.countries[t].countryid,this.getprov(this.countries[t].countryid)},handleProv:function(t){this.provname=this.provs[t].provname,this.prov=this.provs[t].provid,this.getgroup(this.provs[t].provid)},handleGroup:function(t){this.groupname=this.groups[t].groupname,this.group=this.groups[t].groupid,this.getcity(this.groups[t].groupid)},handleCity:function(t){this.cityname=this.cities[t].cityname,this.city=this.cities[t].cityid},handleHouseType:function(t){this.housetypeValue=this.types[t].name,this.housetype=this.types[t].value},getprov:function(t){var e=this;n.a.get("http://www.realtoraccess.com/web/get/provs/",{params:{countryid:t}}).then(function(t){e.provs=t.data})},getgroup:function(t){var e=this;n.a.get("http://www.realtoraccess.com/web/get/groups/",{params:{provid:t}}).then(function(t){e.groups=t.data})},getcity:function(t){var e=this;n.a.get("http://www.realtoraccess.com/web/get/cities/",{params:{groupid:t}}).then(function(t){e.cities=t.data})},getFilterHouse:function(){var t=this;n.a.get("http://www.realtoraccess.com/web/zone/listings/",{params:{country:this.country,prov:this.prov,group:this.group,city:this.city,opendate:this.opendate,housetype:this.housetype}}).then(function(e){t.houses=e.data,t.loading=!1})},changeStartTime:function(t){this.startTime=t},changeEndTime:function(t){this.endTime=t}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"map",attrs:{id:"map"},on:{click:t.toggle}}),t._v(" "),s("div",{staticClass:"gallery"},[s("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom",modal:!1},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("mt-button",{staticClass:"filter",attrs:{size:"small",id:"btnfilter"},on:{click:t.showfilter}},[t._v("筛选条件\n        ")]),t._v(" "),s("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-house",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading"}},t._l(t.houses,function(e,i){return s("li",{key:i,staticClass:"item-houe"},[s("a",{staticStyle:{"text-decoration":"none"},attrs:{href:e.url}},[s("img",{staticClass:"img-house",attrs:{src:e.img,alt:"房源图片"}}),t._v(" "),s("div",{staticClass:"desc-house"},[s("p",{staticClass:"address"},[t._v(t._s(e.address))]),t._v(" "),s("p",{staticClass:"configure"},[t._v(t._s(e.bedroom)+"室"+t._s(e.toilet)+"卫  "+t._s(e.areas))]),t._v(" "),s("p",{staticClass:"type"},[t._v(t._s(e.housetype))]),t._v(" "),s("p",{staticClass:"price"},[t._v(t._s(e.price))])])])])}))],1)],1),t._v(" "),s("div",[s("mt-popup",{staticClass:"filter-popup",attrs:{position:"top"},model:{value:t.filterPopupVisible,callback:function(e){t.filterPopupVisible=e},expression:"filterPopupVisible"}},[s("div",[s("mt-header",{attrs:{title:"筛选条件"}},[s("router-link",{attrs:{slot:"left",to:"/map"},slot:"left"},[s("mt-button",{attrs:{icon:"back"},on:{click:t.close}},[t._v("返回")])],1)],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("选择国家：")]),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleCountry}},[s("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n            "+t._s(t.countryname)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticStyle:{width:"48%"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.countries,function(e,i){return s("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(e.countryname))])}))],1)],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("选择省份：")]),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleProv}},[s("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.provname)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticStyle:{width:"48%"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.provs,function(e,i){return s("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(e.provname))])}))],1)],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("选择大区：")]),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleGroup}},[s("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.groupname)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticStyle:{width:"48%"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.groups,function(e,i){return s("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(e.groupname))])}))],1)],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("选择城市：")]),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleCity}},[s("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.cityname)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticStyle:{width:"48%"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.cities,function(e,i){return s("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(e.cityname))])}))],1)],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("房源类型：")]),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleHouseType}},[s("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.housetypeValue)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticStyle:{width:"48%"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.types,function(e,i){return s("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("开始时间：")]),t._v(" "),s("el-date-picker",{attrs:{editable:!1,type:"datetime",size:"small","value-format":"yyyyMMddHHmmss",placeholder:"选择开始日期与时间"},on:{change:function(e){return t.changeStartTime(e)}},model:{value:t.starttime,callback:function(e){t.starttime=e},expression:"starttime"}})],1),t._v(" "),s("div",{staticClass:"select"},[s("span",{staticClass:"selectdec"},[t._v("结束时间：")]),t._v(" "),s("el-date-picker",{attrs:{editable:!1,size:"small",type:"datetime","value-format":"yyyyMMddHHmmss",placeholder:"选择结束日期与时间"},on:{change:function(e){return t.changeEndTime(e)}},model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}})],1),t._v(" "),s("mt-button",{staticClass:"btnconfirm",attrs:{type:"primary",size:"large"},on:{click:t.selectCompleted}},[t._v("确定")])],1)],1)])},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("PxTO")},"data-v-884288ce",null).exports;i.default.use(o.a);var p=new o.a({routes:[{path:"/",name:"map",component:c}]}),d=s("Au9i"),u=s.n(d),m=(s("d8/S"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var h=s("VU/8")({name:"App"},m,!1,function(t){s("8UPk")},null,null).exports,v=s("zL8q"),g=s.n(v);s("tvR6");i.default.use(u.a),i.default.use(g.a),new i.default({el:"#app",router:p,components:{App:h},template:"<App/>"})},PxTO:function(t,e){},"d8/S":function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.51893675d9a0f87e4c45.js.map