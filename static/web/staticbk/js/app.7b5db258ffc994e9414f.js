webpackJsonp([1],{Hzne:function(t,e){},IBoS:function(t,e,s){t.exports=s.p+"static/img/logo_main_new.e8729e4.png"},JETS:function(t,e,s){t.exports=s.p+"static/img/logo_wechat.fd3a831.png"},MrDw:function(t,e,s){t.exports=s.p+"static/img/no_data.a68cc7f.jpg"},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("/ocq"),n=s("mtWM"),o=s.n(n),r={data:function(){return{popugroup:!1,popupVisible:!0,popupShowNecessery:!0,filterPopupVisible:!1,baiduurl:"",houses:[],countries:[],provs:[],groups:[],cities:[],types:[{name:"二手(MLS)房源",value:"saling"},{name:"楼花房源",value:"presale"},{name:"出租房源",value:"rent"}],country:"Canada",prov:"BC",group:"",city:"",bgndate:"",enddate:"",housetypeValue:"房源类型",housetype:"",endtime:"2018年05月18日",countryname:"选择国家",provname:"选择省份",groupname:"选择大区",cityname:"选择城市",map:{},marker:{},center:{lat:49.2827291,lng:-123.1207375},zoom:12,loading:!0,markers:[],eventType:"map",currentIndex:0,lastIndex:0,clickLastIndex:0,buttonBottom:0,wechat:!1,wechatUrl:"../../static/logo_wechat.png",no_data_default:!1,isClickMarker:!1,pickerStarttime:new Date,startDate:new Date("2018"),STime:"公众开放日开始时间",ETime:"公众开放日结束时间",pickerEndStarttime:new Date,toastHint:"请先选择大区~",toastShow:!1}},created:function(){var t=this;o.a.get("http://www.realtoraccess.com/web/get/groups/",{params:{provid:this.prov}}).then(function(e){t.groups=e.data}),o.a.get("http://www.realtoraccess.com/web/get/cities/",{params:{groupid:this.group}}).then(function(e){t.cities=e.data})},mounted:function(){var t=this,e=document.getElementById("map");this.map=new google.maps.Map(e,{zoom:this.zoom,center:this.center});o.a.get("http://www.realtoraccess.com/web/zone/listings/",{params:{country:this.country,prov:this.prov,group:this.group,city:this.city,bgndate:this.bgndate,enddate:this.enddate,housetype:this.housetype}}).then(function(e){t.houses=e.data,null!=t.houses&&0!==t.houses.length||(t.no_data_default=!0),e.data.forEach(t.generateMarker),t.loading=!1}),document.getElementById("list").addEventListener("scroll",this.handleScroll)},methods:{dropdownshow:function(t){t&&""===this.group&&(this.toastShow=!this.toastShow,this.toastHint="请先选择大区~",this.setCountDown())},setCountDown:function(){var t=this,e=setInterval(function(){t.toastShow=!t.toastShow,clearInterval(e)},3e3)},resetFilter:function(){this.groupname="选择大区",this.cityname="选择城市",this.housetypeValue="房源类型",this.STime="公众开放日开始时间",this.ETime="公众开放日结束时间",this.group="",this.city="",this.housetype="",this.bgndate="",this.enddate=""},formatDate:function(t){var e=t.getFullYear(),s=t.getMonth()+1;s=s<10?"0"+s:s;var a=t.getDate();return e+"年"+s+"月"+(a=a<10?"0"+a:a)+"日"},dateAndtimeFormat:function(t,e){var s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?s[a]:("00"+s[a]).substr((""+s[a]).length)));return e},openPicker:function(t){this.$refs[t].open()},popuWchat:function(){this.wechat=!0},generateMarker:function(t,e){var s=t.lat,a=t.lng;""!==s&&""!==a&&this.createdMarker(t.lat,t.lng,t.price,e)},createdMarker:function(t,e,s,a){var i=this,n=new google.maps.Marker({icon:"http://maps.google.cn/mapfiles/ms/icons/red-dot.png",position:{lat:Number(t),lng:Number(e)},map:this.map,ent_type:"marker"});0===a&&(this.currentIndex=a,this.map.setCenter(n.getPosition()),n.setIcon("http://maps.google.cn/mapfiles/ms/icons/blue-dot.png")),this.markers.push(n),google.maps.event.addListener(n,"click",function(s){i.markerClick(a,n,t,e)})},handleClick:function(){this.popupVisible=!0},toggle:function(){"marker"===this.eventType?(this.popupShowNecessery&&(this.popupVisible=!0,this.popupShowNecessery=!1),this.eventType="map"):this.popupVisible?this.popupVisible=!1:this.popupVisible=!0},showfilter:function(){this.filterPopupVisible?this.filterPopupVisible=!1:this.filterPopupVisible=!0,this.popupVisible=!0},selectCompleted:function(){if(this.enddate<this.bgndate)return this.toastShow=!this.toastShow,this.toastHint="结束日期不能早于开始日期",void this.setCountDown();this.filterPopupVisible=!1,this.getFilterHouse(),this.loading=!0},close:function(){this.filterPopupVisible=!1},handleGroup:function(t){this.groupname=this.groups[t].groupname,this.group=this.groups[t].groupid,this.getcity(this.groups[t].groupid)},handleCity:function(t){this.cityname=this.cities[t].cityname,this.city=this.cities[t].cityid},handleHouseType:function(t){this.housetypeValue=this.types[t].name,this.housetype=this.types[t].value},getprov:function(t){var e=this;o.a.get("http://www.realtoraccess.com/web/get/provs/",{params:{countryid:t}}).then(function(t){e.provs=t.data})},getgroup:function(t){var e=this;o.a.get("http://www.realtoraccess.com/web/get/groups/",{params:{provid:t}}).then(function(t){e.groups=t.data})},getcity:function(t){var e=this;o.a.get("http://www.realtoraccess.com/web/get/cities/",{params:{groupid:t}}).then(function(t){e.cities=t.data})},getFilterHouse:function(){var t=this;o.a.get("http://www.realtoraccess.com/web/zone/listings/",{params:{country:this.country,prov:this.prov,group:this.group,city:this.city,bgndate:this.bgndate,enddate:this.enddate,housetype:this.housetype}}).then(function(e){t.houses=e.data,null==t.houses||0===t.houses.length?t.no_data_default=!0:t.no_data_default=!1;for(var s=0;s<t.markers.length;s++)t.markers[s].setMap(null);t.markers=[],t.houses.forEach(t.generateMarker),t.loading=!1}).catch(function(t){console.log(t)})},changeStartTime:function(t){this.bgndate=this.dateAndtimeFormat(new Date(t),"yyyyMMddhhmmss"),this.STime=this.formatDate(t)},changeEndTime:function(t){this.enddate=this.dateAndtimeFormat(new Date(t),"yyyyMMddhhmmss"),this.ETime=this.formatDate(t),this.enddate<this.bgndate&&(this.toastShow=!this.toastShow,this.toastHint="结束日期不能早于开始日期",this.setCountDown())},markerClick:function(t,e,s,a){this.eventType="marker",this.popupVisible?this.popupShowNecessery=!1:this.popupShowNecessery=!0,this.handleList(t,s,a)},handleList:function(t,e,s){var a=this;if(a.isClickMarker=!0,this.markers[this.lastIndex].setIcon("http://maps.google.cn/mapfiles/ms/icons/red-dot.png"),this.map.setCenter({lat:Number(e),lng:Number(s)}),this.markers[t].setIcon("http://maps.google.cn/mapfiles/ms/icons/blue-dot.png"),this.lastIndex=t,this.currentIndex!==t){this.currentIndex=t;var i=document.getElementById("listitem").offsetWidth,n=(i+12)*t,o=document.getElementById("list"),r=0,l=0,c=setInterval(function(){l=(i+12)*r,r>=t?(o.scrollTo(n,0),a.isClickMarker=!1,clearInterval(c)):o.scrollTo(l,0),r++},5)}},handleScroll:function(){var t=document.getElementById("list").scrollLeft,e=document.getElementById("listitem").offsetWidth+12,s=Math.ceil(t/e);(parseFloat(t)/parseFloat(e)).toFixed(2)>s-.05&&(this.currentIndex=s),s>=this.houses.length&&(this.currentIndex=this.houses.length-1);var a=this.markers[this.currentIndex];(this.currentIndex!==s||this.lastIndex>this.currentIndex)&&!this.isClickMarker&&(this.map.setCenter(a.getPosition()),-1!==this.lastIndex&&(this.markers[this.lastIndex].setIcon("http://maps.google.cn/mapfiles/ms/icons/red-dot.png"),a.setIcon("http://maps.google.cn/mapfiles/ms/icons/blue-dot.png")),this.lastIndex=this.currentIndex)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"page-popup-wrapper",staticStyle:{position:"absolute",width:"100%","z-index":"999"}},[a("mt-header",{staticClass:"header"},[a("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[a("mt-button",{staticClass:"header-left"},[a("img",{staticClass:"icon",attrs:{slot:"icon",src:s("IBoS"),width:"35",height:"35"},slot:"icon"}),t._v(" "),a("span",{staticClass:"header-left"},[t._v("99%的大温地产投资精英都在关注")])])],1),t._v(" "),a("span",{staticClass:"header-right",attrs:{slot:"right"},on:{click:t.popuWchat},slot:"right"},[t._v("关注")])],1)],1),t._v(" "),a("mt-popup",{staticClass:"mint-popup-wechat",style:{top:t.buttonBottom+10+"px"},attrs:{"popup-transition":"popup-fade"},model:{value:t.wechat,callback:function(e){t.wechat=e},expression:"wechat"}},[a("img",{staticClass:"wechatimg",attrs:{src:s("JETS"),alt:"公众号二维码"}}),t._v(" "),a("span",{staticClass:"wetchat_text"},[t._v("长按识别二维码")])]),t._v(" "),a("div",{staticClass:"map",attrs:{id:"map"},on:{click:t.toggle}}),t._v(" "),a("mt-button",{staticClass:"mapfilter",attrs:{size:"small"},on:{click:t.showfilter}},[t._v("筛选条件")]),t._v(" "),a("div",{staticClass:"gallery",attrs:{id:"gallery"}},[a("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom",modal:!1},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.no_data_default,expression:"no_data_default"}],staticClass:"gallery_img",attrs:{src:s("MrDw")}}),t._v(" "),a("mt-button",{staticClass:"filter",attrs:{size:"small",id:"btnfilter"},on:{click:t.showfilter}},[t._v("筛选条件")]),t._v(" "),a("transition",{attrs:{name:"bounce"}},[a("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-house",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading",id:"list"}},[t._l(t.houses,function(e,s){return a("li",{key:s,staticClass:"item-houe",class:{active:t.currentIndex==s},attrs:{id:"listitem"}},[a("div",{staticClass:"selectstatus"}),t._v(" "),a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:e.url}},[a("img",{staticClass:"img-house",attrs:{src:e.img,alt:"房源图片"}}),t._v(" "),a("div",{staticClass:"desc-house"},[a("p",{staticClass:"address"},[t._v(t._s(e.address))]),t._v(" "),a("p",{staticClass:"configure"},[t._v(t._s(e.bedroom)+"室"+t._s(e.toilet)+"卫  "+t._s(e.areas))]),t._v(" "),a("p",{staticClass:"type"},[t._v(t._s(e.housetype))]),t._v(" "),a("p",{staticClass:"price"},[t._v(t._s(e.price))])])])])}),t._v(" "),a("li",{staticStyle:{width:"50%"}})],2)])],1)],1),t._v(" "),a("div",[a("mt-popup",{staticClass:"filter-popup",attrs:{position:"top",modal:!1},model:{value:t.filterPopupVisible,callback:function(e){t.filterPopupVisible=e},expression:"filterPopupVisible"}},[a("div",[a("mt-header",{attrs:{title:"筛选条件"}},[a("router-link",{attrs:{slot:"right",to:"/"},slot:"right"},[a("mt-button",{on:{click:t.close}},[t._v("关闭")])],1)],1),t._v(" "),a("div",{staticClass:"select"},[a("span",{staticClass:"selectdec"},[t._v("选择大区：")]),t._v(" "),a("el-dropdown",{staticClass:"selectgroup",attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleGroup}},[a("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.groupname)+"\n           ")]),t._v(" "),a("el-dropdown-menu",{staticClass:"selectgroup",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.groups,function(e,s){return a("el-dropdown-item",{key:s,attrs:{command:s}},[t._v(t._s(e.groupname))])}))],1)],1),t._v(" "),a("div",{staticClass:"select"},[a("span",{staticClass:"selectdec"},[t._v("选择城市：")]),t._v(" "),a("el-dropdown",{staticClass:"selectgroup",attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleCity,"visible-change":t.dropdownshow}},[a("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.cityname)+"\n           ")]),t._v(" "),a("el-dropdown-menu",{staticClass:"selectgroup",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.cities,function(e,s){return a("el-dropdown-item",{key:s,attrs:{command:s}},[t._v(t._s(e.cityname))])}))],1)],1),t._v(" "),a("div",{staticClass:"select"},[a("span",{staticClass:"selectdec"},[t._v("房源类型：")]),t._v(" "),a("el-dropdown",{staticClass:"selectgroup",attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleHouseType}},[a("el-button",{staticClass:"selectdecin",attrs:{type:"default"}},[t._v("\n             "+t._s(t.housetypeValue)+"\n           ")]),t._v(" "),a("el-dropdown-menu",{staticClass:"selectgroup",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.types,function(e,s){return a("el-dropdown-item",{key:s,attrs:{command:s}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("div",{staticClass:"select"},[a("div",[a("span",{staticClass:"selectdec"},[t._v("开始时间：")]),t._v(" "),a("el-button",{staticClass:"selectgroup",attrs:{type:"default"},nativeOn:{click:function(e){t.openPicker("start")}}},[t._v("\n           "+t._s(t.STime)+"\n         ")])],1),t._v(" "),a("mt-datetime-picker",{ref:"start",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日",startDate:t.startDate},on:{confirm:function(e){return t.changeStartTime(e)}},model:{value:t.pickerStarttime,callback:function(e){t.pickerStarttime=e},expression:"pickerStarttime"}})],1),t._v(" "),a("div",{staticClass:"select"},[a("div",[a("span",{staticClass:"selectdec"},[t._v("结束时间：")]),t._v(" "),a("el-button",{staticClass:"selectgroup",attrs:{type:"default"},nativeOn:{click:function(e){t.openPicker("end")}}},[t._v("\n           "+t._s(t.ETime)+"\n         ")])],1),t._v(" "),a("mt-datetime-picker",{ref:"end",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日",format:"yyyy 年 MM 月 dd 日",startDate:t.startDate},on:{confirm:function(e){return t.changeEndTime(e)}},model:{value:t.pickerEndStarttime,callback:function(e){t.pickerEndStarttime=e},expression:"pickerEndStarttime"}})],1),t._v(" "),a("div",{staticClass:"toastParent"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.toastShow,expression:"toastShow"}],staticClass:"toastHint"},[t._v("\n        "+t._s(t.toastHint)+"\n       ")])]),t._v(" "),a("el-row",{staticClass:"btnconfirm",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("mt-button",{attrs:{type:"primary",size:"large"},on:{click:t.resetFilter}},[t._v("重置")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("mt-button",{attrs:{type:"primary",size:"large"},on:{click:t.selectCompleted}},[t._v("确定")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("bk3l")},"data-v-84c4f3b2",null).exports;a.default.use(i.a);var p=new i.a({routes:[{path:"/",name:"newmap",component:c}]}),u=s("Au9i"),d=s.n(u),h=(s("d8/S"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var m=s("VU/8")({name:"App"},h,!1,function(t){s("Hzne")},null,null).exports,g=s("zL8q"),v=s.n(g);s("tvR6");a.default.use(d.a),a.default.use(v.a),new a.default({el:"#app",router:p,components:{App:m},template:"<App/>"})},bk3l:function(t,e){},"d8/S":function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7b5db258ffc994e9414f.js.map